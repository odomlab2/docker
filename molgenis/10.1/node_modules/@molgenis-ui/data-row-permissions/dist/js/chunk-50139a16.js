(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50139a16"],{"268b":function(e,t,s){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var n=s("1d80"),i=s("577e"),r=s("5899"),o="["+r+"]",a=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),l=function(e){return function(t){var s=i(n(t));return 1&e&&(s=s.replace(a,"")),2&e&&(s=s.replace(c,"")),s}};e.exports={start:l(1),end:l(2),trim:l(3)}},"74c9":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"mb-4 px-4 btn btn-secondary align-self-center",attrs:{to:{name:e.route,params:e.params}}},[e._v(" "+e._s(e.$t("data-row-permissions-back"))+" ")])},i=[],r={props:{route:{type:String,required:!0},params:{type:Object,required:!1,default:function(){}}}},o=r,a=s("2877"),c=Object(a["a"])(o,n,i,!1,null,null,null);t["a"]=c.exports},a0fd:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-75 mx-auto my-5"},[s("div",{staticClass:"d-flex justify-content-between"},[s("h3",{staticClass:"mb-4"},[e._v(" "+e._s(e.$t("data-row-permissions-rls-permissions-of"))+" "+e._s(e.permissionObject.label)+" ")]),s("back-button",{attrs:{route:"SelectEntitityObject",params:{entityId:e.entityId}}})],1),s("server-status",{attrs:{code:e.responseStatus}}),s("div",[s("div",{staticClass:"mt-5"},[s("div",{staticClass:"mb-3 d-flex"},[s("button",{staticClass:"btn mr-3",class:e.addMode?"btn-danger px-3":"btn-primary px-4",attrs:{id:"add-button",disabled:e.editMode||e.deleteMode},on:{click:function(t){e.addMode=!e.addMode}}},[e._v(" "+e._s(e.addMode?e.$t("data-row-permissions-cancel"):e.$t("data-row-permissions-add"))+" ")]),s("button",{staticClass:"btn mr-3",class:e.editMode?"btn-danger px-3":"btn-outline-primary px-4",attrs:{id:"edit-button",disabled:e.addMode||e.deleteMode},on:{click:function(t){return e.toggleEditMode()}}},[e._v(" "+e._s(e.editMode?e.$t("data-row-permissions-cancel"):e.$t("data-row-permissions-edit"))+" ")]),e.canChangeOwnerShip?s("button",{staticClass:"btn mr-3 btn-outline-primary px-4",attrs:{id:"change-owner-button",disabled:e.addMode||e.editMode||e.deleteMode},on:{click:function(t){e.changeOwner=!e.changeOwner}}},[s("span",[e._v(e._s(e.$t("data-row-permissions-change-owner")))])]):e._e(),s("button",{staticClass:"btn mr-3",class:e.deleteMode?"btn-danger px-3":"btn-outline-danger px-4",attrs:{id:"delete-button",disabled:e.addMode||e.editMode},on:{click:function(t){e.deleteMode=!e.deleteMode}}},[e._v(" "+e._s(e.deleteMode?e.$t("data-row-permissions-cancel"):e.$t("data-row-permissions-delete"))+" ")]),s("b-form-input",{staticClass:"filter-height w-25 d-inline",attrs:{type:"text",placeholder:e.$t("data-row-permissions-filter-placeholder")},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("div",{staticClass:"ml-auto"},[s("span",{staticClass:"font-weight-bold mr-3"},[e._v(e._s(e.$t("data-row-permissions-owned-by"))+":")]),s("span",[e._v(e._s(e.permissionObject.ownedByUser||e.permissionObject.ownedByRole))])])],1),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[e._v(e._s(e.$t("data-row-permissions-name")))]),s("th",[e._v(e._s(e.$t("data-row-permissions-type")))]),s("th",{staticClass:"text-middle"},[e._v(" "+e._s(e.$t("data-row-permissions-permission"))+" ")])])]),s("tbody",[e.addMode?s("tr",[s("td",{staticClass:"pl-0"},["role"===e.selectedNewPermissionType?s("b-form-select",{attrs:{options:e.selectableRoles},model:{value:e.newPermissionObject.role,callback:function(t){e.$set(e.newPermissionObject,"role",t)},expression:"newPermissionObject.role"}}):s("b-form-select",{attrs:{options:e.selectableUsers,disabled:"user"!==e.selectedNewPermissionType},model:{value:e.newPermissionObject.user,callback:function(t){e.$set(e.newPermissionObject,"user",t)},expression:"newPermissionObject.user"}})],1),s("td",{staticClass:"pl-0"},[s("b-form-select",{staticClass:"w-auto m-0 pl-2",attrs:{options:e.available_types},on:{change:e.resetNewPermissionObject},model:{value:e.newPermissionType,callback:function(t){e.newPermissionType=t},expression:"newPermissionType"}})],1),s("td",{staticClass:"text-middle px-0 d-flex"},[s("b-form-select",{staticClass:"w-auto ml-1 pl-1 mr-3",attrs:{options:e.availablePermissions},model:{value:e.newPermissionObject.permission,callback:function(t){e.$set(e.newPermissionObject,"permission",t)},expression:"newPermissionObject.permission"}}),s("button",{staticClass:"btn btn-success px-4 ml-auto",attrs:{id:"add-save-button",disabled:!e.canAddPermission},on:{click:e.add}},[e._v(" "+e._s(e.$t("data-row-permissions-add"))+" ")])],1)]):e._e(),e._l(e.permissions,(function(t,n){return s("tr",{key:t.id},[s("td",{staticClass:"align-middle"},[e._v(" "+e._s(t.user||t.role)+" ")]),s("td",{staticClass:"align-middle w-25"},[e._v(" "+e._s(t.role?e.$t("data-row-permissions-role"):e.$t("data-row-permissions-user"))+" ")]),e.editMode?s("td",{staticClass:"align-middle text-middle p-0 w-25"},[s("b-form-select",{staticClass:"w-auto",attrs:{value:e.permissions[n].permission,options:e.availablePermissions},on:{change:function(t){return e.addPermissionChange(n,t)}}})],1):s("td",{staticClass:"align-middle text-middle  w-25"},[s("div",{staticClass:"d-flex align-items-center"},[e._v(" "+e._s(t.permission)+" "),e.deleteMode?s("button",{staticClass:"btn btn-danger ml-auto py-1 px-2",on:{click:function(t){return e.remove(n)}}},[s("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1):e._e()])])])}))],2)]),e.editMode?s("div",{staticClass:"mt-3"},[s("button",{staticClass:"btn btn-success px-4",attrs:{disabled:!e.hasChanges},on:{click:e.update}},[e._v(" "+e._s(e.$t("data-row-permissions-save"))+" ")])]):e._e()])]),s("change-ownership",{model:{value:e.changeOwner,callback:function(t){e.changeOwner=t},expression:"changeOwner"}})],1)},i=[],r=s("5530"),o=(s("ac1f"),s("841c"),s("d81d"),s("4de4"),s("caad"),s("2532"),s("99af"),s("c740"),s("a434"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.unauthorized?s("div",[s("span",[e._v(e._s(e.$t("data-row-permissions-no-results-cta"))+" "),s("a",{attrs:{href:"/login"}},[e._v(e._s(e.$t("data-row-permissions-cta-login")))]),e._v(".")])]):e._e()}),a=[],c=(s("a9e3"),{props:{code:{type:Number,required:!1,default:function(){return 0}}},computed:{unauthorized:function(){return 401===this.code}}}),l=c,d=s("2877"),u=Object(d["a"])(l,o,a,!1,null,null,null),m=u.exports,p=s("2f62"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("center-modal",{attrs:{title:e.$t("data-row-permissions-modal-title-change-ownership"),"ok-title":e.$t("data-row-permissions-change-owner"),"cancel-title":e.$t("data-row-permissions-cancel")},on:{ok:e.save,cancel:e.cancel},model:{value:e.changeOwner,callback:function(t){e.changeOwner=t},expression:"changeOwner"}},[s("b-form-select",{staticClass:"m-1 py-3 fill-modal",attrs:{"select-size":10,options:e.potentialOwnerList},model:{value:e.newOwner,callback:function(t){e.newOwner=t},expression:"newOwner"}})],1)},b=[],h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{centered:"",title:e.modalTitle,"ok-title":e.okTitle,"cancel-title":e.cancelTitle},on:{hide:function(t){return e.$emit("cancel")},close:function(t){return e.$emit("cancel")},cancel:function(t){return e.$emit("cancel")},ok:function(t){return e.$emit("ok")}},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e._t("default")],2)},w=[],O={props:{title:{type:String,required:!1,default:function(){return""}},okTitle:{type:String,required:!1,default:function(){return""}},cancelTitle:{type:String,required:!1,default:function(){return""}},value:{type:Boolean,required:!0,default:function(){return!1}}},data:function(){return{modalShow:!1}},computed:{modalTitle:function(){return this.title}},watch:{value:function(e){this.modalShow=e}}},v=O,g=Object(d["a"])(v,h,w,!1,null,null,null),j=g.exports,_={components:{CenterModal:j},props:{value:{type:Boolean,required:!0,default:function(){return!1}}},data:function(){return{changeOwner:!1,newOwner:""}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])(["permissionObject","userOptions","roleOptions"])),{},{potentialOwnerList:function(){return this.userOptions.concat(this.roleOptions)}}),watch:{value:function(e){this.changeOwner=e,this.newOwner=this.permissionObject.ownedByUser||this.permissionObject.ownedByRole}},methods:Object(r["a"])(Object(r["a"])({},Object(p["b"])(["updatePermissions"])),{},{save:function(){var e=this,t={};this.userOptions.some((function(t){return t.value===e.newOwner}))?t.ownedByUser=this.newOwner:t.ownedByRole=this.newOwner,this.updatePermissions(t),this.$emit("input",!1)},cancel:function(){this.newOwner=this.permissionObject.ownedByUser||this.permissionObject.ownedByRole,this.$emit("input",!1)}})},y=_,P=(s("b931"),Object(d["a"])(y,f,b,!1,null,"1f537ce5",null)),x=P.exports,M=s("74c9"),C=s("2c37"),$={components:{ServerStatus:m,ChangeOwnership:x,BackButton:M["a"]},props:{entityId:{type:String,required:!0},objectId:{type:String,required:!0}},data:function(){return{search:"",addMode:!1,editMode:!1,deleteMode:!1,changeOwner:!1,newPermissionType:"",newPermissionObject:{},changedPermissionObjects:[],available_types:[{text:this.$t("data-row-permissions-select"),value:""},{text:this.$t("data-row-permissions-role"),value:"role"},{text:this.$t("data-row-permissions-user"),value:"user"}]}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(p["c"])(["isSU"])),Object(p["d"])(["userOptions","roleOptions","permissionObject","responseStatus","startInAddMode","availablePermissions","route"])),{},{permissions:function(){return Object(C["a"])(this.permissionObject.permissions,["role","user","permission"],this.search,["role","user"])},canAddPermission:function(){return(this.newPermissionObject.role||this.newPermissionObject.user)&&this.newPermissionObject.permission},hasChanges:function(){return this.changedPermissionObjects.length>0},selectedNewPermissionType:function(){return this.newPermissionType},canChangeOwnerShip:function(){return!0===this.permissionObject.yours||!0===this.isSU},selectableUsers:function(){var e=this.permissionObject.permissions.filter((function(e){return e.user})).map((function(e){return e.user}));return this.userOptions.filter((function(t){return!e.includes(t.value)&&!t.superuser}))},selectableRoles:function(){var e=["SU"];return e=e.concat(this.permissionObject.permissions.filter((function(e){return e.role})).map((function(e){return e.role}))),this.roleOptions.filter((function(t){return!e.includes(t.value)}))}}),watch:{"route.params.objectId":function(){this.init()},startInAddMode:function(e){e&&(this.addMode=!0)}},beforeMount:function(){this.init()},methods:Object(r["a"])(Object(r["a"])({},Object(p["b"])(["getAllRoles","getPermissionsForObject","addPermission","removePermission","updatePermissions","getPermissionsByEntityId"])),{},{init:function(){this.getPermissionsForObject(),this.getAllRoles(),this.getPermissionsByEntityId(this.entityId)},toggleEditMode:function(){this.editMode&&(this.changedPermissionObjects=[]),this.editMode=!this.editMode},add:function(){this.addMode=!1,this.addPermission(this.newPermissionObject),this.newPermissionObject={}},update:function(){this.editMode=!1,this.updatePermissions({permissions:this.changedPermissionObjects}),this.changedPermissionObjects=[]},remove:function(e){var t=JSON.parse(JSON.stringify(this.permissions[e]));this.removePermission(t)},addPermissionChange:function(e,t){var s=this.permissions[e];if(s.permission!==t){var n=JSON.parse(JSON.stringify(this.permissions[e]));n.permission=t,this.changedPermissionObjects.push(n)}else{var i=this.changedPermissionObjects.findIndex((function(e){return e.user===s.user}));i>=0&&this.changedPermissionObjects.splice(i,1)}},resetNewPermissionObject:function(){delete this.newPermissionObject.role,delete this.newPermissionObject.user}})},k=$,I=Object(d["a"])(k,n,i,!1,null,null,null);t["default"]=I.exports},a434:function(e,t,s){"use strict";var n=s("23e7"),i=s("23cb"),r=s("a691"),o=s("50c4"),a=s("7b0b"),c=s("65f0"),l=s("8418"),d=s("1dde"),u=d("splice"),m=Math.max,p=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var s,n,d,u,h,w,O=a(this),v=o(O.length),g=i(e,v),j=arguments.length;if(0===j?s=n=0:1===j?(s=0,n=v-g):(s=j-2,n=p(m(r(t),0),v-g)),v+s-n>f)throw TypeError(b);for(d=c(O,n),u=0;u<n;u++)h=g+u,h in O&&l(d,u,O[h]);if(d.length=n,s<n){for(u=g;u<v-n;u++)h=u+n,w=u+s,h in O?O[w]=O[h]:delete O[w];for(u=v;u>v-n+s;u--)delete O[u-1]}else if(s>n)for(u=v-n;u>g;u--)h=u+n-1,w=u+s-1,h in O?O[w]=O[h]:delete O[w];for(u=0;u<s;u++)O[u+g]=arguments[u+2];return O.length=v-n+s,d}})},a9e3:function(e,t,s){"use strict";var n=s("83ab"),i=s("da84"),r=s("94ca"),o=s("6eeb"),a=s("5135"),c=s("c6b6"),l=s("7156"),d=s("d9b5"),u=s("c04e"),m=s("d039"),p=s("7c73"),f=s("241c").f,b=s("06cf").f,h=s("9bf2").f,w=s("58a8").trim,O="Number",v=i[O],g=v.prototype,j=c(p(g))==O,_=function(e){if(d(e))throw TypeError("Cannot convert a Symbol value to a number");var t,s,n,i,r,o,a,c,l=u(e,"number");if("string"==typeof l&&l.length>2)if(l=w(l),t=l.charCodeAt(0),43===t||45===t){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+l}for(r=l.slice(2),o=r.length,a=0;a<o;a++)if(c=r.charCodeAt(a),c<48||c>i)return NaN;return parseInt(r,n)}return+l};if(r(O,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var y,P=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof P&&(j?m((function(){g.valueOf.call(s)})):c(s)!=O)?l(new v(_(t)),s,P):_(t)},x=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),M=0;x.length>M;M++)a(v,y=x[M])&&!a(P,y)&&h(P,y,b(v,y));P.prototype=g,g.constructor=P,o(i,O,P)}},b931:function(e,t,s){"use strict";s("268b")},c740:function(e,t,s){"use strict";var n=s("23e7"),i=s("b727").findIndex,r=s("44d2"),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);
//# sourceMappingURL=chunk-50139a16.js.map